{"step":"historical","phase":"0-1","name":"Project initialization & frontend baseline","status":"completed","commands":[],"files_changed":["repo setup","branch protection","frontend scaffold","page contract enforcement"],"manual_actions":["GitHub repo creation","branch protection","local setup"],"notes":"Phase 0 and early Phase 1 completed before ledger automation was introduced."}
{"timestamp":"2026-01-26T17:41:39Z","phase":"Phase 1","step":"7","name":"Preview Mode Governance (Draft Mode + Sanity previewDrafts)","status":"success","commands":["cd frontend && npm run lint","cd frontend && npx tsc --noEmit","cd frontend && npm run build"],"files_created":["frontend/src/app/api/draft/enable/route.ts","frontend/src/app/api/draft/disable/route.ts"],"files_modified":["frontend/src/lib/sanity.client.ts","frontend/src/app/page.tsx","frontend/src/app/ecosystem/page.tsx","frontend/src/app/hispanick/page.tsx","frontend/.env.example"],"files_deleted":[],"env_vars_touched":["SANITY_API_READ_TOKEN","DRAFT_MODE_SECRET"],"manual_actions":["Create Sanity API Token (Viewer) in manage.sanity.io","Paste SANITY_API_READ_TOKEN and DRAFT_MODE_SECRET into frontend/.env.local"],"notes":"Draft mode enable/disable endpoints added; slug allowlist enforced; token used only when draftMode is enabled; preview banner visible only in draft mode.","ai_suggestion_automation_candidate":"maybe"}
{"timestamp":"2026-01-27T11:47:10Z","phase":"Phase 1","step":"7.5","name":"Refactor: Centralized Sync Client & Page Architecture","status":"success","files_modified":["frontend/src/lib/sanity.client.ts","frontend/src/app/page.tsx","frontend/src/app/ecosystem/page.tsx","frontend/src/app/hispanick/page.tsx"],"notes":"Centralized logic in sanity.client.ts (isDraftModeEnabled, getClient, sanityFetch). Enforced 'force-dynamic' on pages to guarantee no caching issues in preview. Used React's use() to unwrap async draftMode() synchronously.","ai_suggestion_automation_candidate":"maybe"}
{"timestamp":"2026-01-27T12:00:01Z","phase":"Phase 1","step":"8","name":"Vercel Deployment Prep","status":"success","files_created":["vercel.json"],"files_modified":["frontend/next.config.ts"],"notes":"Root vercel.json added with Vercel-safe ignoreCommand; frontend-only deploys enforced; Sanity CDN images allowed.","ai_suggestion_automation_candidate":"yes"}
{"timestamp":"2026-01-27T12:15:00Z","phase":"Phase 1","step":"8.1","name":"Fix React.use() Production Crash","status":"success","files_modified":["frontend/src/lib/sanity.client.ts","frontend/src/app/page.tsx","frontend/src/app/ecosystem/page.tsx","frontend/src/app/hispanick/page.tsx","frontend/src/app/api/draft/enable/route.ts","frontend/src/app/api/draft/disable/route.ts"],"notes":"Removed React.use() pattern; made draftMode detection async; sanityFetch returns data + isDraft; forced nodejs runtime for draft routes.","ai_suggestion_automation_candidate":"maybe"}